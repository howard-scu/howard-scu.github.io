<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/6/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-cxfreeze-e6-89-93-e5-8c-85python" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/06/cxfreeze-e6-89-93-e5-8c-85python/" class="article-date">
  <time datetime="2014-04-05T16:29:36.000Z" itemprop="datePublished">2014-04-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/06/cxfreeze-e6-89-93-e5-8c-85python/">cxfreeze打包Python</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>安装过程不赘述</p>
<div></div><br><div>打包命令如下:</div><br><div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>cxfreeze c:\main.py <span style="color: #333399;">–</span>target<span style="color: #333399;">-</span>dir c:\dir <span style="color: #333399;">–</span>base<span style="color: #333399;">-</span>name<span style="color: #333399;">=</span><span style="line-height: 1.5;">win32gui</span></div><br></div><br></div><br><div></div><br><div>注意：</div><br><div></div><br><div>1、将exe放到其他机子上运行，弹出“找不到msvcr100.dll“。手动将”msvcr100.dll“拷贝到dist目录下即可。可以写个脚本把这些都包含进去</div><br><div></div><br><div>2、要去掉exe里的后面黑色控制台窗口就在前面的命令改成</div><br><div></div><br><div>cxfreeze D:\source\game1.0.py(需打包文件路径） –target-dir D:\a（存放exe的目标文件夹路径）–base-name=win32gui</div><br></div><br><div></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/04/06/cxfreeze-e6-89-93-e5-8c-85python/" data-id="cjsnzpcrb001tz8h8z6lqfoin" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vim-e8-ae-be-e7-bd-aec-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/27/vim-e8-ae-be-e7-bd-aec-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83/" class="article-date">
  <time datetime="2014-03-27T14:10:50.000Z" itemprop="datePublished">2014-03-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tools/">Tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/27/vim-e8-ae-be-e7-bd-aec-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83/">vim设置c开发环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong><span style="color: green;">1</span>**</strong><span style="color: green;">、配置文件的位置</span>**</p>
<div style="text-indent: 21pt;">在目录 /etc/ 下面，有个名为<strong>vimrc</strong>的文件，这是系统中公共的vim配置文件，对所有用户都有效。而在每个用户的主目录下，都可以自己建立私有的配置文件，命名为：“<strong><span style="font-size: 12pt;">.</span>**</strong>vimrc<strong>”。例如，/root目录下，通常已经存在一个</strong><span style="font-size: 12pt;">.</span><strong>**vimrc</strong>文件。</div><br><div><strong><span style="color: green;"><br></span></strong></div><br><div><strong><span style="color: green;">2</span>**</strong><span style="color: green;">、设置语法高亮显示</span><strong></strong></div><br><div style="margin: 0cm 0cm 0pt 21pt; text-indent: 21pt;">1) 打开vimrc，添加以下语句来使得语法高亮显示：</div><br><div style="margin: 0cm 0cm 0pt 42pt; text-indent: 21pt;"><span style="color: red;">syntax on</span></div><br><div style="margin: 0cm 0cm 0pt 21pt; text-indent: 21pt;">2) 如果此时语法还是没有高亮显示，那么在/etc目录下的profile文件中添加以下语句：</div><br><div style="margin: 0cm 0cm 0pt 42pt; text-indent: 21pt;"><span style="color: red;">export TERM=xterm-color</span></div><br><div></div><br><div><span style="color: green;">3</span><strong><strong><span style="color: green;">、设置</span></strong></strong><span style="color: green;">Windows</span><strong><strong><span style="color: green;">风格的</span></strong></strong><span style="color: green;">C/C++</span><strong><strong><span style="color: green;">自动缩进（添加以下</span></strong></strong><span style="color: green;">set</span><strong><strong><span style="color: green;">语句到</span></strong></strong><span style="color: green;">vimrc</span><strong>**<span style="color: green;">中）</span></strong></div><br>&gt; <div>1）设置（软）制表符宽度为4：</div><br>&gt;<br>&gt; &gt; <div><span style="color: red;">set tabstop=4</span></div><br>&gt;<br>&gt; &gt; <div><span style="color: red;"> set softtabstop=4</span></div><br>&gt;<br>&gt; <div>2）设置缩进的空格数为4</div><br>&gt;<br>&gt; <div><span style="color: red;">set shiftwidth=4</span></div><br>&gt;<br>&gt; <div>3）设置自动缩进：即每行的缩进值与上一行相等；使用 noautoindent 取消设置：</div><br>&gt;<br>&gt; <div style="margin: 0cm 0cm 0pt 63pt; text-indent: 21pt;"><span style="color: red;">set autoindent</span></div><br>&gt;<br>&gt; <div>4）设置使用 C/C++ 语言的自动缩进方式：</div><br>&gt;<br>&gt; <div><span style="color: red;">set cindent</span></div><br>&gt;<br>&gt; <div>5）设置C/C++语言的具体缩进方式（以我的windows风格为例）：</div><br>&gt;<br>&gt; <div><span style="color: red;">set cinoptions={0,1s,t0,n-2,p2s,(03s,=.5s,&gt;1s,=1s,:1s</span></div><br>&gt;<br>&gt; <div>6）如果想在左侧显示文本的行号，可以用以下语句：</div><br>&gt;<br>&gt; <div><span style="color: red;">set nu</span></div><br>&gt;<br>&gt; <div>7）最后，如果没有下列语句，就加上吧：</div><br>&gt;<br>&gt; <div style="margin: 0cm 0cm 0pt 63pt; text-indent: 21pt;"><span style="color: red;">if &amp;term==”xterm”</span></div><br>&gt;<br>&gt; <div style="margin: 0cm 0cm 0pt 84pt; text-indent: 21pt;"><span style="color: red;">set t_Co=8</span></div><br>&gt;<br>&gt; <div style="margin: 0cm 0cm 0pt 42pt; text-indent: 21pt;"><span style="color: red;"> set t_Sb=^[[4%dm</span></div><br>&gt;<br>&gt; <div style="margin: 0cm 0cm 0pt 84pt; text-indent: 21pt;"><span style="color: red;">set t_Sf=^[[3%dm</span></div><br>&gt;<br>&gt; <div style="margin: 0cm 0cm 0pt 63pt; text-indent: 21pt;"><span style="color: red;">endif</span></div><br>&gt;<br>&gt; <div style="margin: 0cm 0cm 0pt 63pt; text-indent: 21pt;"></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/03/27/vim-e8-ae-be-e7-bd-aec-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83/" data-id="cjsnzpcwh005dz8h848unwihw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vim/">vim</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vtk-e6-8b-a6-e6-88-aa-e4-ba-8b-e4-bb-b6-e5-b9-b6-e5-a4-84-e7-90-86" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/13/vtk-e6-8b-a6-e6-88-aa-e4-ba-8b-e4-bb-b6-e5-b9-b6-e5-a4-84-e7-90-86/" class="article-date">
  <time datetime="2014-03-13T13:22:05.000Z" itemprop="datePublished">2014-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/vtk/">vtk</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/13/vtk-e6-8b-a6-e6-88-aa-e4-ba-8b-e4-bb-b6-e5-b9-b6-e5-a4-84-e7-90-86/">vtk拦截事件并处理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div>有两种方式：</div><br><div>1.当做一般类进行处理；</div><br><div>2.继承系统提供的interactorstyle类，并重写相应的处理方法或者自定义方法。</div><br><div></div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkPolyDataMapper.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkObjectFactory.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkCommand.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkActor.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkSmartPointer.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkRenderWindow.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkRenderer.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkInteractorStyle.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkPolyData.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkSphereSource.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkInteractorStyleTrackballCamera.h<span style="color: #333399;">&gt;</span><br><br><span style="color: #008000;">// 一般类</span><br><span style="color: #0000ff;"><strong>class</strong></span> MyClass<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br><span style="color: #0000ff;"><strong>void</strong></span> KeypressCallbackFunction(vtkObject<span style="color: #333399;"><em></em></span> caller,<br><span style="color: #0000ff;"><strong>long</strong></span> <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> eventId,<br><span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> callData )<br>{<br>std<span style="color: #333399;">:</span><span style="color: #333399;">:</span>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“Caught event in MyClass”</span> <span style="color: #333399;">&lt;&lt;</span> std<span style="color: #333399;">:</span><span style="color: #333399;">:</span>endl;<br>}<br><br>};<br><br><span style="color: #008000;">// 继承自interactorstyle的类</span><br><span style="color: #0000ff;"><strong>class</strong></span> MyInteractorStyle <span style="color: #333399;">:</span> <span style="color: #0000ff;"><strong>public</strong></span> vtkInteractorStyleTrackballCamera<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br><span style="color: #0000ff;"><strong>static</strong></span> MyInteractorStyle<span style="color: #333399;"><em></em></span> New();<br>vtkTypeMacro(MyInteractorStyle, vtkInteractorStyleTrackballCamera);<br><br><span style="color: #0000ff;"><strong>void</strong></span> KeypressCallbackFunction(vtkObject<span style="color: #333399;"></span> caller,<br><span style="color: #0000ff;"><strong>long</strong></span> <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> eventId,<br><span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> callData )<br>{<br>std<span style="color: #333399;">:</span><span style="color: #333399;">:</span>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“Caught event in MyInteractorStyle”</span> <span style="color: #333399;">&lt;&lt;</span> std<span style="color: #333399;">:</span><span style="color: #333399;">:</span>endl;<br>}<br><br>};<br>vtkStandardNewMacro(MyInteractorStyle);<br><br><span style="color: #0000ff;"><strong>int</strong></span> main(<span style="color: #0000ff;"><strong>int</strong></span>, <span style="color: #0000ff;"><strong>char</strong></span> <span style="color: #333399;"></span>[])<br>{<br><span style="color: #008000;">// Create a sphere</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkSphereSource<span style="color: #333399;">&gt;</span> sphereSource <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkSphereSource<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetCenter(<span style="color: #6e00aa;">0</span>.<span style="color: #6e00aa;">0</span>, <span style="color: #6e00aa;">0</span>.<span style="color: #6e00aa;">0</span>, <span style="color: #6e00aa;">0</span>.<span style="color: #6e00aa;">0</span>);<br>sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetRadius(<span style="color: #6e00aa;">5</span>.<span style="color: #6e00aa;">0</span>);<br>sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Update();<br><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkPolyDataMapper<span style="color: #333399;">&gt;</span> mapper <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkPolyDataMapper<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>mapper<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetInputConnection(sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>GetOutputPort());<br><br><span style="color: #008000;">// Create an actor</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkActor<span style="color: #333399;">&gt;</span> actor <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkActor<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>actor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetMapper(mapper);<br><br><span style="color: #008000;">// A renderer and render window</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderer<span style="color: #333399;">&gt;</span> renderer <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderer<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindow<span style="color: #333399;">&gt;</span> renderWindow <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindow<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>renderWindow<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>AddRenderer(renderer);<br><br><span style="color: #008000;">// An interactor</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;">&gt;</span> renderWindowInteractor <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetRenderWindow(renderWindow);<br><br><span style="color: #ff0000;">MyClass myClass;</span></div><br><div><span style="line-height: 1.5;">  </span><span style="color: #ff0000;">//直接将对象绑定到interactor上<br>renderWindowInteractor-&gt;AddObserver(vtkCommand::KeyPressEvent, &amp;myClass, &amp;MyClass::KeypressCallbackFunction);</span><br><br><span style="color: #ff0000;">  MyInteractorStyle* style = MyInteractorStyle::New();</span></div><br><div><span style="line-height: 1.5;">  </span><span style="color: #ff0000;">//将interactorstyle引用绑定到interactor上<br>renderWindowInteractor-&gt;AddObserver(vtkCommand::KeyPressEvent, style, &amp;MyInteractorStyle::KeypressCallbackFunction);</span><br><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>MyInteractorStyle<span style="color: #333399;">&gt;</span> style2 <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>MyInteractorStyle<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>AddObserver(vtkCommand<span style="color: #333399;">:</span><span style="color: #333399;">:</span>KeyPressEvent, style2, <span style="color: #333399;">&amp;</span>MyInteractorStyle<span style="color: #333399;">:</span><span style="color: #333399;">:</span>KeypressCallbackFunction);<br><br>renderer<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>AddActor(actor);<br>renderer<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetBackground(<span style="color: #6e00aa;">1</span>,<span style="color: #6e00aa;">1</span>,<span style="color: #6e00aa;">1</span>); <span style="color: #008000;">// Background color white</span><br>renderWindow<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Render();<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Start();<br><br>style<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Delete();<br><br><span style="color: #0000ff;"><strong>return</strong></span> EXIT_SUCCESS;<br>}</div><br></div><br></div><br><div></div><br><div></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/03/13/vtk-e6-8b-a6-e6-88-aa-e4-ba-8b-e4-bb-b6-e5-b9-b6-e5-a4-84-e7-90-86/" data-id="cjsnzpd3c00adz8h8bh7fvot0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ubuntu-e5-ae-89-e8-a3-85g" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/11/ubuntu-e5-ae-89-e8-a3-85g/" class="article-date">
  <time datetime="2014-03-11T07:43:18.000Z" itemprop="datePublished">2014-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/11/ubuntu-e5-ae-89-e8-a3-85g/">ubuntu安装g++</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用g++编译c++程序，出现错误：</p>
<p>g++: error trying to exec ‘cc1plus’: execvp: 没有那个文件或目录</p>
<p>这是Ubuntu 发行版里面不带g++</p>
<p><span style="font-size: 16px; line-height: 1.5;">直接重新安装有源的问题。参见前篇。</span></p>
<p><span style="font-size: 16px; line-height: 1.5;"> </span></p>
<p>安装gcc和g++及一些依赖包的命令：</p>
<p>sudo apt-get install build-essential</p>
<p>sudo apt-get install g++</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/03/11/ubuntu-e5-ae-89-e8-a3-85g/" data-id="cjsnzpcw60055z8h8ms8tr1gu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/g/">g++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ubuntu-e6-9b-b4-e6-96-b0-e6-ba-90" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/11/ubuntu-e6-9b-b4-e6-96-b0-e6-ba-90/" class="article-date">
  <time datetime="2014-03-11T07:09:04.000Z" itemprop="datePublished">2014-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/11/ubuntu-e6-9b-b4-e6-96-b0-e6-ba-90/">ubuntu更新源</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、首先备份源列表(有备无患)<br>sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup</p>
<p>2、修改更新源</p>
<p>sudo vim /etc/apt/sources.list</p>
<p>3、添加源地址</p>
<p>4、启用更新地址</p>
<p>sudo apt-get update</p>
        
          <p class="article-more-link">
            <a href="/2014/03/11/ubuntu-e6-9b-b4-e6-96-b0-e6-ba-90/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/03/11/ubuntu-e6-9b-b4-e6-96-b0-e6-ba-90/" data-id="cjsnzpcw00052z8h800jkz21y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vtk-e4-b8-adgetoutput-e5-92-8cgetoutputport-e5-8c-ba-e5-88-ab" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/17/vtk-e4-b8-adgetoutput-e5-92-8cgetoutputport-e5-8c-ba-e5-88-ab/" class="article-date">
  <time datetime="2014-01-16T21:43:13.000Z" itemprop="datePublished">2014-01-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/vtk/">vtk</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/17/vtk-e4-b8-adgetoutput-e5-92-8cgetoutputport-e5-8c-ba-e5-88-ab/">VTK中GetOutput()和GetOutputPort()区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><span style="font-family: 微软雅黑;">VTK的数据流采用流水线(pipeline)作业方式。但是在接口的时候有两种数据格式一种是使用</span><span style="font-family: 微软雅黑;">GetOutput()，另外一种是使用GetOutputPort()</span></p>
<div><span style="font-family: 微软雅黑;">这两种输出有什么分别呢？</span></div><br><div><span style="font-family: 微软雅黑;"><strong>举例说明：</strong></span></div><br><div><span style="font-family: 微软雅黑;">vtkDICOMImageReader对象拥有方法</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">GetOutput()和</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">GetOutputPort()，它的继承关系如下图。继承了vtkImageAlgorithm。</span></div><br><div><img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-40fa07a338bda1eba9fdde5b65b38eb2_classvtkDICOMImageReader__inherit__graph1.png" alt="Inheritance graph"></div><br><div>在<span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">vtkAlgorithm中</span><span style="font-size: 10.5pt; line-height: 1.5;">GetOutput()如下定义：</span></div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>vtkImageData<span style="color: #333399;"><em></em></span> GetOutput();</div><br></div><br></div><br><div>可知输出格式是<span style="font-size: 10.5pt; line-height: 1.5;"><span style="color: #ff0000;">vtkImageData</span></span><span style="font-size: 10.5pt; line-height: 1.5;">类型；</span></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;"><br></span></div><br><div>另外<span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">GetOutputPort()在类</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">vtkImageAlgorithm中定义如下：</span></div><br><div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>vtkAlgorithmOutput<span style="color: #333399;"></span> GetOutputPort()</div><br><div>{<br><span style="color: #0000ff;"><strong>return</strong></span> <span style="color: #0000ff;"><strong>this</strong></span><span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>GetOutputPort(<span style="color: #6e00aa;">0</span>);</div><br><div>}</div><br></div><br></div><br></div><br><div>可知输出格式是<span style="color: #ff0000;">vtkAlgorithmOutput</span><span style="font-size: 10.5pt; line-height: 1.5;">类型</span></div><br><div></div><br><div>而<span style="font-family: 微软雅黑;">vtkAlgorithm</span><span style="font-family: 微软雅黑;">和vtkImageAlgorithm类的关系如下：</span><br><div><br><div><img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-40fa07a338bda1eba9fdde5b65b38eb2_classvtkImageAlgorithm__coll__graph1.png" alt="Collaboration graph"></div><br></div><br></div><br><div><span style="font-family: 微软雅黑;">vtkImageAlgorithm是继承了</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">vtkAlgorithm的；</span></div><br><div></div><br><div><span style="font-family: 微软雅黑;">再看看</span><span style="font-size: 10.5pt; line-height: 1.5;">vtkImageData的解释：</span></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;">vtkImageData是</span><span style="font-size: 10.5pt; line-height: 1.5;">vtkDataSet</span><span style="font-size: 10.5pt; line-height: 1.5;">具体实现</span><span style="font-size: 10.5pt; line-height: 1.5;">一个数据对象。vtkImageData可以表示一个拓扑或者几何点阵的几何数据结构。</span></div><br><div><img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-40fa07a338bda1eba9fdde5b65b38eb2_classvtkImageData__inherit__graph1.png" alt="Inheritance graph"></div><br><div><br><div><span style="font-family: 微软雅黑;"><br></span></div><br><div><span style="font-family: 微软雅黑;">看看</span>vtkAlgorithmOutput<span style="font-size: 10.5pt; line-height: 1.5;">的解释：</span></div><br><div>vtkAlgorithmOutput是由<span style="font-size: 10.5pt; line-height: 1.5;">vtkAlgorithm的</span><span style="font-size: 10.5pt; line-height: 1.5;">GetOutputPort方法</span><span style="font-size: 10.5pt; line-height: 1.5;">返回的是一个代理对象。经常被传递给另一个</span><span style="font-size: 10.5pt; line-height: 1.5;">vtkAlgorithm类的</span><span style="font-size: 10.5pt; line-height: 1.5;">SetInputConnection或者</span><span style="font-size: 10.5pt; line-height: 1.5;">AddInputConnection或者</span><span style="font-size: 10.5pt; line-height: 1.5;">RemoveInputConnection方法，以建立通道连接。</span></div><br></div><br><div><img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-40fa07a338bda1eba9fdde5b65b38eb2_classvtkAlgorithmOutput__inherit__graph1.png" alt="Inheritance graph"></div><br><div></div><br><div></div><br><div><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">参考】：</span></div><br><div><span style="font-family: 微软雅黑;">[1]<a href="http://www.vtk.org/doc/release/5.10/html/classvtkImageData.html" target="_blank" rel="noopener">http://www.vtk.org/doc/release/5.10/html/classvtkImageData.html</a> </span></div><br><div>[2]<a href="http://www.vtk.org/doc/release/5.10/html/classvtkAlgorithm.html#a278ce83f371e6a398cf46f4600108d3e" target="_blank" rel="noopener">http://www.vtk.org/doc/release/5.10/html/classvtkAlgorithm.html#a278ce83f371e6a398cf46f4600108d3e</a></div><br><div>[3]<a href="http://www.vtk.org/doc/release/5.10/html/classvtkImageAlgorithm.html" target="_blank" rel="noopener">http://www.vtk.org/doc/release/5.10/html/classvtkImageAlgorithm.html</a></div><br><div>[4]<a href="http://www.vtk.org/doc/release/5.10/html/classvtkDataObject.html" target="_blank" rel="noopener">http://www.vtk.org/doc/release/5.10/html/classvtkDataObject.html</a></div><br><div>[5]<a href="http://www.vtk.org/doc/release/5.10/html/classvtkAlgorithmOutput.html" target="_blank" rel="noopener">http://www.vtk.org/doc/release/5.10/html/classvtkAlgorithmOutput.html</a></div><br><div>[6]<a href="http://www.vislab.cn/bbs/archiver/?tid-2656.html" target="_blank" rel="noopener">http://www.vislab.cn/bbs/archiver/?tid-2656.html</a></div><br><div>[7]<a href="http://vtk.1045678.n5.nabble.com/difference-between-GetOutputPort-and-GetOutput-td1250681.html" target="_blank" rel="noopener">http://vtk.1045678.n5.nabble.com/difference-between-GetOutputPort-and-GetOutput-td1250681.html</a></div><br><div>[8]<a href="http://www.vislab.cn/bbs/archiver/?tid-97.html" target="_blank" rel="noopener">http://www.vislab.cn/bbs/archiver/?tid-97.html</a></div><br><div></div><br><div></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/17/vtk-e4-b8-adgetoutput-e5-92-8cgetoutputport-e5-8c-ba-e5-88-ab/" data-id="cjsnzpcwu005lz8h8b4xbcipy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/data-struct/">data struct</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pipeline/">pipeline</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vtk/">vtk</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-itk-e4-b8-8evtk-e5-af-b9-e8-b1-a1-e7-9a-84-e4-ba-92-e7-9b-b8-e8-bd-ac-e5-8c-96" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/17/itk-e4-b8-8evtk-e5-af-b9-e8-b1-a1-e7-9a-84-e4-ba-92-e7-9b-b8-e8-bd-ac-e5-8c-96/" class="article-date">
  <time datetime="2014-01-16T19:59:49.000Z" itemprop="datePublished">2014-01-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/itk/">itk</a>►<a class="article-category-link" href="/categories/itk/vtk/">vtk</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/17/itk-e4-b8-8evtk-e5-af-b9-e8-b1-a1-e7-9a-84-e4-ba-92-e7-9b-b8-e8-bd-ac-e5-8c-96/">ITK与VTK对象的互相转化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div><span style="font-size: 10.5pt; line-height: 1.5;">    </span><span style="font-size: 10.5pt; line-height: 1.5;">    </span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">ITK的数据流采用如图1所示流水线(pipeline)作业方式。遵循此方式，所处理的数据来龙去脉清晰明了。在图1中，数据流左边的ImageFile代表待处理的图像文件，而右边ImageFile则代表处理后的图像文件。ImageFileReade:将存贮图像文件读人到内存，形成Image，再调用所希望处理的Fileter算法(比如滤波、分割、配准等具体算法)，将对读人的图像数据进行处理。最后，ImageFileWriter将处理的图像数据结果保存，或输人给图形显示系统(如VTK)，进行数据可视化。</span></div><br><div><span style="font-family: 微软雅黑;"> <img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-6a95d74385b0102f698795abc3ba226b_ITKliucheng1.jpg" alt></span></div><br><div><span style="font-family: 微软雅黑;"><br></span></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;">    </span><span style="font-size: 10.5pt; line-height: 1.5;">    </span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">VTK是C++语言开发的、公开源码的、面向对象的数据可视化软件开发包，并不单纯用于医学图像数据的可视化。VTK支持跨平台的编译，可以应用于Windows,Linux等系统。VTK支持包括数量、向量、张量、结构和测定体积等方法一系列可视化算法，VTK还支持包括建模。</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">VTK的数据流同样采用流水线作业方式，如图2所示。</span></div><br><div><span style="font-family: 微软雅黑;"> <img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-6a95d74385b0102f698795abc3ba226b_VTKliucheng1.jpg" alt></span></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;">    </span><span style="font-size: 10.5pt; line-height: 1.5;">    </span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">vtkSource为整个可视化流的开始，比如读取、生成数据等。vtkFilte对输入源数据进行各种处理，与ITK的Fileter类似。原始数据经过各种Filte:的处理后，再由vtkMappe:转换(或映射)成可供其它算法模块直接使用的数据形式，比如为几何数据。vtkActor类用来描述绘制场景中一个实体，即绘制场景的某个角色(Actor)。通过SetMapper()方法，可以将几何数据的属性传递给Actor，再由vtkRenderer类将处理后的数据结果显示出来。</span></div><br><div><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;"><br></span></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;">    </span><span style="font-size: 10.5pt; line-height: 1.5;">    </span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">由于ITK和VTK的数据流都是采用流水线作业形式，比较方便地利用类库本身提供的类型转换类来实现，如图3所示。通过ITKtoVTKImageFilter类操作将ITK和VTK的图像数据连接了起来，VTK负责图像数据的显示，而ITK负责图像的处理，其中VTK的Image Viewe:是一个很方便实现的图像显示类，它在内部管理着vtkImageWindow, vtkRenderer, vtkActor2D和vtkImageMapper等图象类，实现图像查看、显示和可视化功能。</span></div><br><div><span style="font-family: 微软雅黑;"><img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-6a95d74385b0102f698795abc3ba226b_ITKtoVTK1.jpg" alt></span></div><br><div><br><div><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">
        
          <p class="article-more-link">
            <a href="/2014/01/17/itk-e4-b8-8evtk-e5-af-b9-e8-b1-a1-e7-9a-84-e4-ba-92-e7-9b-b8-e8-bd-ac-e5-8c-96/#more">Read More</a>
          </p>
        
      
    </span></div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/17/itk-e4-b8-8evtk-e5-af-b9-e8-b1-a1-e7-9a-84-e4-ba-92-e7-9b-b8-e8-bd-ac-e5-8c-96/" data-id="cjsnzpd2m00a1z8h8v48375fe" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/itk/">itk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vtk/">vtk</a></li></ul>

    </footer>
  </div>
  
</div></div></article>


  
    <article id="post-vtk-callbacks" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/11/vtk-callbacks/" class="article-date">
  <time datetime="2014-01-11T12:24:14.000Z" itemprop="datePublished">2014-01-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/vtk/">vtk</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/11/vtk-callbacks/">VTK Callbacks</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div>简介：<span style="font-size: 10.5pt; line-height: 1.5;"> </span></div><br><div>回调函数就是命令/观察者模式中的观察者。<span style="background-color: #ffffff; color: #252525; font-family: 'Microsoft YaHei'; font-size: 16px; line-height: 25.33333396911621px;">VTK对象状态发生变化时,它就会发出一个命令通知所有观察家该事件。</span></div><br><div></div><br><div>为了捕获这个事件，你需要做下面几件事：</div><br><div></div><br><div>1. 声明一个如下形式的函数:</div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div><span style="color: #0000ff;"><strong>void</strong></span> func(vtkObject<span style="color: #333399;"><em></em></span>, <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>long</strong></span> eid, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> clientdata, <span style="color: #0000ff;"><strong>void</strong></span> <span style="color: #333399;"><em></em></span>calldata)</div><br></div><br></div><br><div></div><br><div>2. 创建一个<span style="font-size: 10.5pt; line-height: 1.5;">vtkCallbackCommand对象，并将其回调函数设置为你自己创建的函数：</span></div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>  vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span> keypressCallback <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>keypressCallback<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetCallback ( func );</div><br></div><br></div><br><div></div><br><div>或者</div><br><div></div><br><div>2. 创建一个vtkCallbackCommand并重写execute函数：</div><br><div><span style="font-size: 10.5pt; line-height: 1.5;">virtual void Execute(vtkObject caller, unsigned long, void<em>)</em></span></div><br><div>它会在创建<span style="font-size: 10.5pt; line-height: 1.5;">CallbackCommand对象后自动当成callback被执行</span><span style="font-size: 10.5pt; line-height: 1.5;"> </span></div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>  vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span> keypressCallback <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();</div><br></div><br></div><br><div></div><br><div>3. 注册callback，监听命令</div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;">&gt;</span> renderWindowInteractor <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetRenderWindow(renderWindow);renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>AddObserver ( vtkCommand<span style="color: #333399;">:</span><span style="color: #333399;">:</span>KeyPressEvent, keypressCallback );<br><br></div><br></div><br></div><br><div>在这个例子中，<span style="font-size: 10.5pt; line-height: 1.5;">vtkRenderWindowInteractor用来监听</span><span style="font-size: 10.5pt; line-height: 1.5;">KeyPressEvent事件。</span></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;"> </span></div><br><div><strong>caller</strong></div><br><div>vtkObject对象caller是观察者的指针。在例子中，因为我们是绑定<span style="font-size: 10.5pt; line-height: 1.5;">vtkCallbackCommand在</span><span style="font-size: 10.5pt; line-height: 1.5;">vtkRenderWindowInteractor对象上，所以我们可以强制类型转换caller到</span><span style="font-size: 10.5pt; line-height: 1.5;">vtkRenderWindowInteractor</span><span style="font-size: 10.5pt; line-height: 1.5;">类型。</span></div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div><span style="color: #0000ff;"><strong>void</strong></span> KeypressCallbackFunction ( vtkObject<span style="color: #333399;"></span> caller, <span style="color: #0000ff;"><strong>long</strong></span> <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> eventId, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> clientData, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> callData )<br>{<br>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“Keypress callback”</span> <span style="color: #333399;">&lt;&lt;</span>endl;vtkRenderWindowInteractor <span style="color: #333399;"><em></em></span>iren <span style="color: #333399;">=</span><br><span style="color: #0000ff;"><strong>static_cast</strong></span><span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;"></span><span style="color: #333399;">&gt;</span>(caller);<br><br>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“Pressed: “</span> <span style="color: #333399;">&lt;&lt;</span> iren<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>GetKeySym() <span style="color: #333399;">&lt;&lt;</span> endl;<br>}<br><br></div><br></div><br></div><br><div></div><br><div><strong>clientdata</strong></div><br><div>clientdata提供了一种方法来提供对数据的访问,将必要的回调函数。你可以使用<span style="font-size: 10.5pt; line-height: 1.5;">vtkCallbackCommand函数的</span><span style="font-size: 10.5pt; line-height: 1.5;">SetClientData方法</span><span style="font-size: 10.5pt; line-height: 1.5;">设置该数据。假如,您想要访问</span><span style="font-size: 10.5pt; line-height: 1.5;">回调函数</span><span style="font-size: 10.5pt; line-height: 1.5;">的</span>vtkProgrammableFilter<span style="font-size: 10.5pt; line-height: 1.5;">实例,你可以这么做:</span></div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>  vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkProgrammableFilter<span style="color: #333399;">&gt;</span> filter <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkProgrammableFilter<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span> timerCallback <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>timerCallback<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetCallback ( func );<br>timerCallback<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetClientData(filter);<br><br></div><br></div><br></div><br><div></div><br><div>然后再回调函数中，你可以这样使用该数据：</div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div><span style="color: #0000ff;"><strong>void</strong></span> func ( vtkObject<span style="color: #333399;"><em></em></span> caller, <span style="color: #0000ff;"><strong>long</strong></span> <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> eventId, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> clientData, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> callData )<br>{<br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkProgrammableFilter<span style="color: #333399;">&gt;</span> programmableFilter <span style="color: #333399;">=</span><br><span style="color: #0000ff;"><strong>reinterpret_cast</strong></span><span style="color: #333399;">&lt;</span>vtkProgrammableFilter<span style="color: #333399;"></span><span style="color: #333399;">&gt;</span>(clientData);<br>}</div><br></div><br></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;"> </span><span style="font-size: 10.5pt; line-height: 1.5;">完整范例：</span></div><br><div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkPolyDataMapper.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkActor.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkSmartPointer.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkRenderWindow.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkRenderer.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkPolyData.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkSphereSource.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkCallbackCommand.h<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vtkCommand.h<span style="color: #333399;">&gt;</span><span style="color: #0000ff;"><strong>static</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> KeypressCallbackFunction ( vtkObject<span style="color: #333399;"><em></em></span> caller, <span style="color: #0000ff;"><strong>long</strong></span> <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> eventId,<br><span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> clientData, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> callData );<br><br><span style="color: #0000ff;"><strong>int</strong></span> main(<span style="color: #0000ff;"><strong>int</strong></span>, <span style="color: #0000ff;"><strong>char</strong></span> <span style="color: #333399;"></span>[])<br>{<br><span style="color: #008000;">// Create a sphere</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkSphereSource<span style="color: #333399;">&gt;</span> sphereSource <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkSphereSource<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetCenter(<span style="color: #6e00aa;">0</span>.<span style="color: #6e00aa;">0</span>, <span style="color: #6e00aa;">0</span>.<span style="color: #6e00aa;">0</span>, <span style="color: #6e00aa;">0</span>.<span style="color: #6e00aa;">0</span>);<br>sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetRadius(<span style="color: #6e00aa;">5</span>.<span style="color: #6e00aa;">0</span>);<br>sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Update();<br><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkPolyDataMapper<span style="color: #333399;">&gt;</span> mapper <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkPolyDataMapper<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>mapper<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetInputConnection(sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>GetOutputPort());<br><br><span style="color: #008000;">// Create an actor</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkActor<span style="color: #333399;">&gt;</span> actor <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkActor<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>actor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetMapper(mapper);<br><br><span style="color: #008000;">// A renderer and render window</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderer<span style="color: #333399;">&gt;</span> renderer <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderer<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindow<span style="color: #333399;">&gt;</span> renderWindow <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindow<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>renderWindow<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>AddRenderer(renderer);<br><br><span style="color: #008000;">// An interactor</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;">&gt;</span> renderWindowInteractor <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetRenderWindow(renderWindow);<br><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span> keypressCallback <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br><br><span style="color: #008000;">// Allow the observer to access the sphereSource</span><br><span style="color: #ff0000;">  <strong>keypressCallback-&gt;SetClientData(sphereSource);//设置clientdata对象</strong></span><br><strong><span style="color: #ff0000;">  keypressCallback-&gt;SetCallback(KeypressCallbackFunction );//将回调命令与callback函数绑定</span></strong><br><strong><span style="color: #ff0000;">renderWindowInteractor-&gt;AddObserver(vtkCommand::KeyPressEvent, keypressCallback);//监听keypress事件，绑定回调命令</span></strong><br><br>renderer<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>AddActor(actor);<br>renderer<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetBackground(<span style="color: #6e00aa;">1</span>,<span style="color: #6e00aa;">1</span>,<span style="color: #6e00aa;">1</span>); <span style="color: #008000;">// Background color white</span><br>renderWindow<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Render();<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Start();<br><br><span style="color: #0000ff;"><strong>return</strong></span> EXIT_SUCCESS;<br>}<br><br><span style="color: #0000ff;"><strong>void</strong></span> KeypressCallbackFunction(vtkObject<span style="color: #333399;"><em></em></span> caller, <span style="color: #0000ff;"><strong>long</strong></span> <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> vtkNotUsed(eventId), <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> clientData, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> vtkNotUsed(callData) )<br>{<br><span style="color: #008000;">// Prove that we can access the sphere source</span><br><span style="color: #ff0000;">**  vtkSphereSource sphereSource =<br>static_cast&lt;vtkSphereSource<em>&gt;(clientData);//强制类型转换为原来的对象<strong></strong></em></span><br>std<span style="color: #333399;">:</span><span style="color: #333399;">:</span>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“Radius is “</span> <span style="color: #333399;">&lt;&lt;</span> sphereSource<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>GetRadius() <span style="color: #333399;">&lt;&lt;</span> std<span style="color: #333399;">:</span><span style="color: #333399;">:</span>endl;<br>}<br><br></div><br></div><br></div><br></div><br><div></div><br><div><br><div>calldata<strong></strong></div><br><div>calldata是通过callback传递的数据。例如,当ProgressEvent事件被发送时,进程值可以作为calldata被一同发送。</div><br><div>完整范例：在这里例子中，我们创建一个自定义的VTK过滤器来调用我们绑定的带有calldata值的事件。我们使用一个定制的计时器来更新过滤器以便事件可以自动重复触发。更新过程为<span style="font-family: 'Courier New'; font-size: 11.578947067260742px; line-height: 18.947368621826172px;">vtkMyTestFilter更新-&gt;</span><span style="font-family: 'Courier New'; font-size: 11.578947067260742px; line-height: 18.947368621826172px;"> vtkCallbackCommand-&gt;</span><span style="font-family: 'Courier New'; font-size: 11.578947067260742px; line-height: 18.947368621826172px;"> CallbackFunction</span></div><br></div><br><div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkObjectFactory.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkCommand.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkCallbackCommand.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkStreamingDemandDrivenPipeline.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkInformationVector.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkInformation.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkDataObject.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkSmartPointer.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkAppendPolyData.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkSphereSource.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkPolyDataAlgorithm.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkRenderer.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkRenderWindow.h”</span><br>#<span style="color: #0000ff;">include<strong></strong></span> <span style="color: #ff00bf;">“vtkRenderWindowInteractor.h”</span><br><span style="color: #0000ff;">class<strong></strong></span> vtkMyTestFilter <span style="color: #333399;">:</span> <span style="color: #0000ff;">public<strong></strong></span> vtkPolyDataAlgorithm<br>{<br><span style="color: #0000ff;">public<strong></strong></span><span style="color: #333399;">:</span><br>vtkTypeMacro(vtkMyTestFilter,vtkPolyDataAlgorithm);<br><span style="color: #0000ff;">static**</span> vtkMyTestFilter <span style="color: #333399;"></span>New();<br><span style="color: #0000ff;"><strong>int</strong></span> RefreshEvent;<br><span style="color: #0000ff;"><strong>protected</strong></span><span style="color: #333399;">:</span><br>vtkMyTestFilter()<br>{<br><span style="color: #0000ff;"><strong>this</strong></span><span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetNumberOfInputPorts(<span style="color: #6e00aa;">0</span>);<br><span style="color: #0000ff;"><strong>this</strong></span><span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>RefreshEvent <span style="color: #333399;">=</span> vtkCommand<span style="color: #333399;">:</span><span style="color: #333399;">:</span>UserEvent <span style="color: #333399;">+</span> <span style="color: #6e00aa;">1</span>;<br><span style="color: #0000ff;"><strong>this</strong></span><span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Counter <span style="color: #333399;">=</span> <span style="color: #6e00aa;">0</span>;<br>}<br><span style="color: #0000ff;"><strong>int</strong></span> RequestData(vtkInformation <span style="color: #333399;"><em></em></span>, vtkInformationVector <span style="color: #333399;"></span><span style="color: #333399;"><em></em></span>, vtkInformationVector <span style="color: #333399;"></span>)<br>{<br><span style="color: #0000ff;"><strong>this</strong></span><span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>InvokeEvent(<span style="color: #0000ff;"><strong>this</strong></span><span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>RefreshEvent, <span style="color: #333399;">&amp;</span><span style="color: #0000ff;"><strong>this</strong></span><span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Counter);<br><span style="color: #0000ff;"><strong>this</strong></span><span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Counter<span style="color: #333399;">++</span>;<br><span style="color: #0000ff;"><strong>return</strong></span> <span style="color: #6e00aa;">1</span>;<br>}<br><span style="color: #0000ff;"><strong>private</strong></span><span style="color: #333399;">:</span><br>vtkMyTestFilter(<span style="color: #0000ff;"><strong>const</strong></span> vtkMyTestFilter<span style="color: #333399;">&amp;</span>);  <span style="color: #008000;">// Not implemented.</span><br><span style="color: #0000ff;"><strong>void</strong></span> <span style="color: #0000ff;"><strong>operator</strong></span><span style="color: #333399;">=</span>(<span style="color: #0000ff;"><strong>const</strong></span> vtkMyTestFilter<span style="color: #333399;">&amp;</span>);  <span style="color: #008000;">// Not implemented.</span><br><span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> Counter;<br>};<br>vtkStandardNewMacro(vtkMyTestFilter);<br><span style="color: #0000ff;"><strong>static</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> CallbackFunction(vtkObject<span style="color: #333399;"><em></em></span> caller,<br><span style="color: #0000ff;"><strong>long</strong></span> <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> eventId,<br><span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> clientData,<br><span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> callData );<br><span style="color: #0000ff;"><strong>class</strong></span> vtkTimerCallback <span style="color: #333399;">:</span> <span style="color: #0000ff;"><strong>public</strong></span> vtkCommand<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br><span style="color: #0000ff;"><strong>static</strong></span> vtkTimerCallback <span style="color: #333399;"></span>New()<br>{<br>vtkTimerCallback <span style="color: #333399;"><em></em></span>cb <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> vtkTimerCallback;<br><span style="color: #0000ff;"><strong>return</strong></span> cb;<br>}<br><span style="color: #0000ff;"><strong>virtual</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> Execute(vtkObject <span style="color: #333399;"></span>vtkNotUsed(caller),<br><span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>long</strong></span> vtkNotUsed(eventId),<br><span style="color: #0000ff;"><strong>void</strong></span> <span style="color: #333399;"><em></em></span>vtkNotUsed(callData))<br>{<br>TestFilter<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Modified();<br>TestFilter<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Update();<br>}<br>vtkMyTestFilter<span style="color: #333399;"></span> TestFilter;<br>};<br><span style="color: #0000ff;"><strong>int</strong></span> main(<span style="color: #0000ff;"><strong>int</strong></span>, <span style="color: #0000ff;"><strong>char</strong></span> <span style="color: #333399;"><em></em></span>[])<br>{<br><span style="color: #008000;">// Create a renderer, render window, and interactor</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderer<span style="color: #333399;">&gt;</span> renderer <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderer<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindow<span style="color: #333399;">&gt;</span> renderWindow <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindow<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>renderWindow<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>AddRenderer(renderer);<br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;">&gt;</span> renderWindowInteractor <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkRenderWindowInteractor<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetRenderWindow(renderWindow);<br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkMyTestFilter<span style="color: #333399;">&gt;</span> testFilter <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkMyTestFilter<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span> callback <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkCallbackCommand<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br><strong><span style="color: #ff0000;">callback-&gt;SetCallback(CallbackFunction );</span></strong><br><strong><span style="color: #ff0000;">testFilter-&gt;AddObserver(testFilter-&gt;RefreshEvent, callback);//将callback函数绑定testFilter的更新事件</span></strong><br>testFilter<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Update();<br>renderWindow<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Render();<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Initialize();<br><span style="color: #008000;">// Sign up to receive TimerEvent</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkTimerCallback<span style="color: #333399;">&gt;</span> timerCallback <span style="color: #333399;">=</span><br>vtkSmartPointer<span style="color: #333399;">&lt;</span>vtkTimerCallback<span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>New();<br>timerCallback<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>TestFilter <span style="color: #333399;">=</span> testFilter;<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>AddObserver(vtkCommand<span style="color: #333399;">:</span><span style="color: #333399;">:</span>TimerEvent, timerCallback);<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>CreateRepeatingTimer(<span style="color: #6e00aa;">100</span>);<br>renderWindowInteractor<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Start();<br><span style="color: #0000ff;"><strong>return</strong></span> EXIT_SUCCESS;<br>}<br><span style="color: #0000ff;"><strong>void</strong></span> CallbackFunction(vtkObject<span style="color: #333399;"></span> vtkNotUsed(caller),<br><span style="color: #0000ff;"><strong>long</strong></span> <span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span> vtkNotUsed(eventId),<br><span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> vtkNotUsed(clientData),<br><span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> callData )<br>{<br><span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span><span style="color: #333399;"><em></em></span> callDataCasted <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>reinterpret_cast</strong></span><span style="color: #333399;">&lt;</span><span style="color: #0000ff;"><strong>unsigned</strong></span> <span style="color: #0000ff;"><strong>int</strong></span><span style="color: #333399;"></span><span style="color: #333399;">&gt;</span>(callData);<br>std<span style="color: #333399;">:</span><span style="color: #333399;">:</span>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #333399;">*</span>callDataCasted <span style="color: #333399;">&lt;&lt;</span> std<span style="color: #333399;">:</span><span style="color: #333399;">:</span>endl;<br>}</div><br></div><br></div><br></div><br><div></div><br><div></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/11/vtk-callbacks/" data-id="cjsnzpd5z00bfz8h8038ux8c7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/callback/">callback</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/command/">command</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/observer/">observer</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vtk/">vtk</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-command-and-observer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/11/command-and-observer/" class="article-date">
  <time datetime="2014-01-10T16:50:30.000Z" itemprop="datePublished">2014-01-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/design-pattern/">design pattern</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/11/command-and-observer/">Command and Observer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong><span style="font-size: 12pt;" data-wiz-span="data-wiz-span">1.Observer(观察者模式)</span></strong></p>
<div>主题对象管理某些数据，当主题内的数据发生改变，就通知观察者，观察者已经注册主题便会在主题数据发生改变时能够收到更新。一旦数据改变，新的数据会以某种形式送到观察者手上。<br><div><span style="color: #ff0000;">观察者模式</span>定义了对象之间的<span style="color: #ff0000;">一对多关系</span>，当一个对象改变状态时，它的所有依赖者都会收到通知并自动更新。</div><br></div><br><div><img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-4056175e6cecd785cac776067999cc1e_obsv1.jpg" alt></div><br><div>例子：</div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>iostream<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>set<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>string<span style="color: #333399;">&gt;</span><br><span style="color: #0000ff;"><strong>using</strong></span> <span style="color: #0000ff;"><strong>namespace</strong></span> std;<br><span style="color: #008000;">/////////////////////抽象模式定义</span><br><span style="color: #0000ff;"><strong>class</strong></span> CObservable;<br><span style="color: #008000;">//观察者，纯虚基类</span><br><span style="color: #0000ff;"><strong>class</strong></span> CObserver<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br>CObserver<span style="color: #333399;">:</span><span style="color: #333399;">:</span>CObserver(){};<br><span style="color: #0000ff;"><strong>virtual</strong></span> CObserver<span style="color: #333399;">:</span><span style="color: #333399;">:</span><span style="color: #333399;">~</span>CObserver(){};<br><span style="color: #008000;">//当被观察的目标发生变化时，通知调用该方法</span><br><span style="color: #008000;">//来自被观察者pObs, 扩展参数为pArg</span><br><span style="color: #0000ff;"><strong>virtual</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> Update(CObservable<span style="color: #333399;"><em></em></span> pObs, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"></span> pArg <span style="color: #333399;">=</span> NULL) <span style="color: #333399;">=</span> <span style="color: #6e00aa;">0</span>;<br>};<br><span style="color: #008000;">//被观察者，即Subject</span><br><span style="color: #0000ff;"><strong>class</strong></span> CObservable<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br>CObservable() <span style="color: #333399;">:</span> m_bChanged(<span style="color: #0000ff;"><strong>false</strong></span>) {};<br><span style="color: #0000ff;"><strong>virtual</strong></span> <span style="color: #333399;">~</span>CObservable() {};<br><span style="color: #008000;">//注册观察者</span><br><span style="color: #0000ff;"><strong>void</strong></span> Attach(CObserver<span style="color: #333399;"><em></em></span> pObs);<br><span style="color: #008000;">//注销观察者</span><br><span style="color: #0000ff;"><strong>void</strong></span> Detach(CObserver<span style="color: #333399;"></span> pObs);<br><span style="color: #008000;">//注销所有观察者</span><br><span style="color: #0000ff;"><strong>void</strong></span> DetachAll();<br><span style="color: #008000;">//若状态变化，则遍历观察者，逐个通知更新</span><br><span style="color: #0000ff;"><strong>void</strong></span> Notify(<span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> pArg <span style="color: #333399;">=</span> NULL);<br><span style="color: #008000;">//测试目标状态是否变化</span><br><span style="color: #0000ff;"><strong>bool</strong></span> HasChanged();<br><span style="color: #008000;">//获取观察者数量</span><br><span style="color: #0000ff;"><strong>int</strong></span> GetObserversCount();<br><span style="color: #0000ff;"><strong>protected</strong></span><span style="color: #333399;">:</span><br><span style="color: #008000;">//设置状态变化!!!必须继承CObservable才能设置目标状态</span><br><span style="color: #0000ff;"><strong>void</strong></span> SetChanged();<br><span style="color: #008000;">//初始化目标为未变化状态</span><br><span style="color: #0000ff;"><strong>void</strong></span> ClearChanged();<br><span style="color: #0000ff;"><strong>private</strong></span><span style="color: #333399;">:</span><br><span style="color: #0000ff;"><strong>bool</strong></span> m_bChanged; <span style="color: #008000;">//状态</span><br>set<span style="color: #333399;">&lt;</span>CObserver<span style="color: #333399;"></span><span style="color: #333399;">&gt;</span> m_setObs; <span style="color: #008000;">//set保证目标唯一性</span><br>};<br><span style="color: #008000;">/////////////////////抽象模式实现</span><br><span style="color: #0000ff;"><strong>void</strong></span> CObservable<span style="color: #333399;">:</span><span style="color: #333399;">:</span>Attach(CObserver<span style="color: #333399;"><em></em></span> pObs)<br>{<br><span style="color: #0000ff;"><strong>if</strong></span> (<span style="color: #333399;">!</span>pObs) <span style="color: #0000ff;"><strong>return</strong></span>;<br>m_setObs.insert(pObs);<br>}<br><span style="color: #0000ff;"><strong>void</strong></span> CObservable<span style="color: #333399;">:</span><span style="color: #333399;">:</span>Detach(CObserver<span style="color: #333399;"></span> pObs)<br>{<br><span style="color: #0000ff;"><strong>if</strong></span> (<span style="color: #333399;">!</span>pObs) <span style="color: #0000ff;"><strong>return</strong></span>;<br>m_setObs.erase(pObs);<br>}<br><span style="color: #0000ff;"><strong>void</strong></span> CObservable<span style="color: #333399;">:</span><span style="color: #333399;">:</span>DetachAll()<br>{<br>m_setObs.clear();<br>}<br><span style="color: #0000ff;"><strong>void</strong></span> CObservable<span style="color: #333399;">:</span><span style="color: #333399;">:</span>SetChanged()<br>{<br>m_bChanged <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>true</strong></span>;<br>}<br><span style="color: #0000ff;"><strong>void</strong></span> CObservable<span style="color: #333399;">:</span><span style="color: #333399;">:</span>ClearChanged()<br>{<br>m_bChanged <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>false</strong></span>;<br>}<br><span style="color: #0000ff;"><strong>bool</strong></span> CObservable<span style="color: #333399;">:</span><span style="color: #333399;">:</span>HasChanged()<br>{<br><span style="color: #0000ff;"><strong>return</strong></span> m_bChanged;<br>}<br><span style="color: #0000ff;"><strong>int</strong></span> CObservable<span style="color: #333399;">:</span><span style="color: #333399;">:</span>GetObserversCount()<br>{<br><span style="color: #0000ff;"><strong>return</strong></span> m_setObs.size();<br>}<br><span style="color: #0000ff;"><strong>void</strong></span> CObservable<span style="color: #333399;">:</span><span style="color: #333399;">:</span>Notify(<span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> pArg <span style="color: #008000;">/ = NULL <em>/</em></span>)<br>{<br><span style="color: #0000ff;"><strong>if</strong></span> (<span style="color: #333399;">!</span>HasChanged()) <span style="color: #0000ff;"><strong>return</strong></span>;<br>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“notify observers…”</span> <span style="color: #333399;">&lt;&lt;</span> endl;<br>ClearChanged();<br>set<span style="color: #333399;">&lt;</span>CObserver<span style="color: #333399;"></span><span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>iterator itr <span style="color: #333399;">=</span> m_setObs.begin();<br><span style="color: #0000ff;"><strong>for</strong></span> (; itr <span style="color: #333399;">!=</span> m_setObs.end(); itr<span style="color: #333399;">++</span>)<br>{<br>(<span style="color: #333399;"><em></em></span>itr)<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Update(<span style="color: #0000ff;"><strong>this</strong></span>, pArg);<br>}<br>}<br><span style="color: #008000;">/////////////////////具体应用类定义和实现</span><br><span style="color: #008000;">//bloger是发布者，即被观察者(subject)</span><br><span style="color: #0000ff;"><strong>class</strong></span> CBloger <span style="color: #333399;">:</span> <span style="color: #0000ff;"><strong>public</strong></span> CObservable<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br><span style="color: #0000ff;"><strong>void</strong></span> Publish(<span style="color: #0000ff;"><strong>const</strong></span> string <span style="color: #333399;">&amp;</span>strContent)<br>{<br>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“bloger publish, content: “</span> <span style="color: #333399;">&lt;&lt;</span> strContent <span style="color: #333399;">&lt;&lt;</span> endl;<br>SetChanged();<br>Notify(<span style="color: #0000ff;"><strong>const_cast</strong></span><span style="color: #333399;">&lt;</span><span style="color: #0000ff;"><strong>char</strong></span><span style="color: #333399;"></span><span style="color: #333399;">&gt;</span>(strContent.c_str()));<br>}<br>};<br><span style="color: #008000;">//portal是发布者，即被观察者(subject)</span><br><span style="color: #0000ff;"><strong>class</strong></span> CPortal <span style="color: #333399;">:</span> <span style="color: #0000ff;"><strong>public</strong></span> CObservable<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br><span style="color: #0000ff;"><strong>void</strong></span> Publish(<span style="color: #0000ff;"><strong>const</strong></span> string <span style="color: #333399;">&amp;</span>strContent)<br>{<br>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“portal publish, content: “</span> <span style="color: #333399;">&lt;&lt;</span> strContent <span style="color: #333399;">&lt;&lt;</span> endl;<br>SetChanged();<br>Notify(<span style="color: #0000ff;"><strong>const_cast</strong></span><span style="color: #333399;">&lt;</span><span style="color: #0000ff;"><strong>char</strong></span><span style="color: #333399;"><em></em></span><span style="color: #333399;">&gt;</span>(strContent.c_str()));<br>}<br>};<br><span style="color: #008000;">//RSS阅读器，观察者</span><br><span style="color: #0000ff;"><strong>class</strong></span> CRSSReader <span style="color: #333399;">:</span> <span style="color: #0000ff;"><strong>public</strong></span> CObserver<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br>CRSSReader(<span style="color: #0000ff;"><strong>const</strong></span> string <span style="color: #333399;">&amp;</span>strName) <span style="color: #333399;">:</span> m_strName(strName){}<br><span style="color: #0000ff;"><strong>virtual</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> Update(CObservable<span style="color: #333399;"></span> pObs, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> pArg <span style="color: #333399;">=</span> NULL)<br>{<br><span style="color: #0000ff;"><strong>char</strong></span><span style="color: #333399;"></span> pContent <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>static_cast</strong></span><span style="color: #333399;">&lt;</span><span style="color: #0000ff;"><strong>char</strong></span><span style="color: #333399;"><em></em></span><span style="color: #333399;">&gt;</span>(pArg);<br><span style="color: #008000;">//观察多个目标</span><br><span style="color: #0000ff;"><strong>if</strong></span> (<span style="color: #0000ff;"><strong>dynamic_cast</strong></span><span style="color: #333399;">&lt;</span>CBloger<span style="color: #333399;"></span><span style="color: #333399;">&gt;</span>(pObs))<br>{<br>cout <span style="color: #333399;">&lt;&lt;</span> m_strName <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“ updated from bloger, content: “</span> <span style="color: #333399;">&lt;&lt;</span> pContent <span style="color: #333399;">&lt;&lt;</span> endl;<br>}<br><span style="color: #0000ff;"><strong>else</strong></span> <span style="color: #0000ff;"><strong>if</strong></span> (<span style="color: #0000ff;"><strong>dynamic_cast</strong></span><span style="color: #333399;">&lt;</span>CPortal<span style="color: #333399;"><em></em></span><span style="color: #333399;">&gt;</span>(pObs))<br>{<br>cout <span style="color: #333399;">&lt;&lt;</span> m_strName <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“ updated from portal, content: “</span> <span style="color: #333399;">&lt;&lt;</span> pContent <span style="color: #333399;">&lt;&lt;</span> endl;<br>}<br>}<br><span style="color: #0000ff;"><strong>private</strong></span><span style="color: #333399;">:</span><br>string m_strName;<br>};<br><span style="color: #008000;">//Mail阅读器，观察者</span><br><span style="color: #0000ff;"><strong>class</strong></span> CMailReader <span style="color: #333399;">:</span> <span style="color: #0000ff;"><strong>public</strong></span> CObserver<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br>CMailReader(<span style="color: #0000ff;"><strong>const</strong></span> string <span style="color: #333399;">&amp;</span>strName) <span style="color: #333399;">:</span> m_strName(strName){}<br><span style="color: #0000ff;"><strong>virtual</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> Update(CObservable<span style="color: #333399;"></span> pObs, <span style="color: #0000ff;"><strong>void</strong></span><span style="color: #333399;"><em></em></span> pArg <span style="color: #333399;">=</span> NULL)<br>{<br><span style="color: #0000ff;"><strong>char</strong></span><span style="color: #333399;"></span> pContent <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>static_cast</strong></span><span style="color: #333399;">&lt;</span><span style="color: #0000ff;"><strong>char</strong></span><span style="color: #333399;"><em></em></span><span style="color: #333399;">&gt;</span>(pArg);<br><span style="color: #0000ff;"><strong>if</strong></span> (<span style="color: #0000ff;"><strong>dynamic_cast</strong></span><span style="color: #333399;">&lt;</span>CBloger<span style="color: #333399;"></span><span style="color: #333399;">&gt;</span>(pObs))<br>{<br>cout <span style="color: #333399;">&lt;&lt;</span> m_strName <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“ updated from bloger, content: “</span> <span style="color: #333399;">&lt;&lt;</span> pContent <span style="color: #333399;">&lt;&lt;</span> endl;<br>}<br><span style="color: #0000ff;"><strong>if</strong></span> (<span style="color: #0000ff;"><strong>dynamic_cast</strong></span><span style="color: #333399;">&lt;</span>CPortal<span style="color: #333399;"><em></em></span><span style="color: #333399;">&gt;</span>(pObs))<br>{<br>cout <span style="color: #333399;">&lt;&lt;</span> m_strName <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“ updated from portal, content: “</span> <span style="color: #333399;">&lt;&lt;</span> pContent <span style="color: #333399;">&lt;&lt;</span> endl;<br>}<br>}<br><span style="color: #0000ff;"><strong>private</strong></span><span style="color: #333399;">:</span><br>string m_strName;<br>};<br><span style="color: #008000;">/////////////////Main</span><br><span style="color: #0000ff;"><strong>int</strong></span> main()<br>{<br><span style="color: #008000;">//目标(被观察者)</span><br>CBloger<span style="color: #333399;"></span> pBloger <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> CBloger();<br>CPortal<span style="color: #333399;"><em></em></span> pPortal <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> CPortal();<br><span style="color: #008000;">//观察者. 一个观察者可以观察多个目标</span><br>CRSSReader<span style="color: #333399;"></span> pRssReader <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> CRSSReader(<span style="color: #ff00bf;">“rss reader”</span>);<br>CMailReader<span style="color: #333399;"><em></em></span> pMailReader <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> CMailReader(<span style="color: #ff00bf;">“mail reader”</span>);<br>pBloger<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Attach(pRssReader); <span style="color: #008000;">//bloger注册观察者</span><br>pBloger<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Attach(pMailReader); <span style="color: #008000;">//bloger注册观察者</span><br>pPortal<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Attach(pRssReader); <span style="color: #008000;">//portal注册观察者</span><br>pPortal<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Attach(pMailReader); <span style="color: #008000;">//portal注册观察者</span><br><span style="color: #008000;">//博客发布信息</span><br>pBloger<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Publish(<span style="color: #ff00bf;">“博客分享设计模式”</span>);<br>cout <span style="color: #333399;">&lt;&lt;</span> endl;<br><span style="color: #008000;">//门户发布信息</span><br>pPortal<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Publish(<span style="color: #ff00bf;">“门户分享设计模式”</span>);<br>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“\nportal detached mail reader”</span> <span style="color: #333399;">&lt;&lt;</span> endl;<br>pPortal<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Detach(pMailReader);<br>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“portal observers count: “</span> <span style="color: #333399;">&lt;&lt;</span> pPortal<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>GetObserversCount() <span style="color: #333399;">&lt;&lt;</span> endl <span style="color: #333399;">&lt;&lt;</span> endl;<br>pPortal<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Publish(<span style="color: #ff00bf;">“门户分享设计模式”</span>);<br>system(<span style="color: #ff00bf;">“pause”</span>);<br><span style="color: #0000ff;"><strong>return</strong></span> <span style="color: #6e00aa;">0</span>;<br>}</div><br></div><br></div><br><div></div><br><div><span style="font-size: 12pt;" data-wiz-span="data-wiz-span"><strong>2.Command(命令模式)</strong></span><br><div>命令模式通俗的例子：在餐厅，顾客订餐，把订单交给女招待，女招待拿了订单，交给厨师，厨师根据订单准备食物。一张订单封装了准备食物的请求。女招待的工作就是接受订单，然后调用订单的orderUp()方法。</div><br></div><br><div>命令模式，将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可撤消的操作。</div><br><div><img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-4056175e6cecd785cac776067999cc1e_cmd1.jpg" alt></div><br><div>示例代码：</div><br><div><br><div style="border: 1px solid black; margin-left: auto; margin-right: auto; padding: 3px; font-family: 'Courier New'; font-size: 12px;"><br><div>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>iostream<span style="color: #333399;">&gt;</span><br>#<span style="color: #0000ff;"><strong>include</strong></span> <span style="color: #333399;">&lt;</span>vector<span style="color: #333399;">&gt;</span><br><span style="color: #0000ff;"><strong>using</strong></span> <span style="color: #0000ff;"><strong>namespace</strong></span>std;<span style="color: #008000;">// 烤肉师傅</span><br><span style="color: #0000ff;"><strong>class</strong></span> RoastCook<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br><span style="color: #0000ff;"><strong>void</strong></span> MakeMutton()<br>{ cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“烤羊肉”</span> <span style="color: #333399;">&lt;&lt;</span>endl; }<span style="color: #0000ff;"><strong>void</strong></span> MakeChickenWing()<br>{ cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“烤鸡翅膀”</span> <span style="color: #333399;">&lt;&lt;</span> endl; }<br><br>};<br><br><span style="color: #008000;">// 抽象命令类</span><br><br><span style="color: #0000ff;"><strong>class</strong></span> Command<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br>Command(RoastCook<span style="color: #333399;"></span> temp) { receiver <span style="color: #333399;">=</span> temp; }<br><span style="color: #0000ff;"><strong>virtual</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> ExecuteCmd() <span style="color: #333399;">=</span> <span style="color: #6e00aa;">0</span>;<br><span style="color: #0000ff;"><strong>protected</strong></span><span style="color: #333399;">:</span><br>RoastCook<span style="color: #333399;"><em></em></span> receiver;<br>};<br><br><span style="color: #008000;">// 烤羊肉命令</span><br><span style="color: #0000ff;"><strong>class</strong></span> MakeMuttonCmd <span style="color: #333399;">:</span> <span style="color: #0000ff;"><strong>public</strong></span> Command<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br>MakeMuttonCmd(RoastCook<span style="color: #333399;"></span> temp) <span style="color: #333399;">:</span> Command(temp) {}<br><span style="color: #0000ff;"><strong>virtual</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> ExecuteCmd() { receiver<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>MakeMutton(); }<br>};<br><br><span style="color: #008000;">// 烤鸡翅膀命令</span><br><span style="color: #0000ff;"><strong>class</strong></span> MakeChickenWingCmd <span style="color: #333399;">:</span> <span style="color: #0000ff;"><strong>public</strong></span> Command<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br>MakeChickenWingCmd(RoastCook<span style="color: #333399;"><em></em></span> temp) <span style="color: #333399;">:</span> Command(temp) {}<br><span style="color: #0000ff;"><strong>virtual</strong></span> <span style="color: #0000ff;"><strong>void</strong></span> ExecuteCmd() { receiver<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>MakeChickenWing(); }<br>};<br><br><span style="color: #008000;">// 服务员类</span><br><span style="color: #0000ff;"><strong>class</strong></span> Waiter<br>{<br><span style="color: #0000ff;"><strong>public</strong></span><span style="color: #333399;">:</span><br><span style="color: #0000ff;"><strong>void</strong></span> SetCmd(Command<span style="color: #333399;"></span> temp);<br><br><span style="color: #008000;">// 通知执行</span><br><span style="color: #0000ff;"><strong>void</strong></span> Notify();<br><br><span style="color: #0000ff;"><strong>protected</strong></span><span style="color: #333399;">:</span><br>vector<span style="color: #333399;">&lt;</span>Command<span style="color: #333399;"><em></em></span><span style="color: #333399;">&gt;</span> m_commandList;<br>};<br><br><span style="color: #0000ff;"><strong>void</strong></span> Waiter<span style="color: #333399;">:</span><span style="color: #333399;">:</span>SetCmd(Command<span style="color: #333399;"></span> temp)<br>{<br>m_commandList.push_back(temp);<br>cout <span style="color: #333399;">&lt;&lt;</span> <span style="color: #ff00bf;">“增加订单”</span> <span style="color: #333399;">&lt;&lt;</span> endl;<br>}<br><br><span style="color: #0000ff;"><strong>void</strong></span> Waiter<span style="color: #333399;">:</span><span style="color: #333399;">:</span>Notify()<br>{<br>vector<span style="color: #333399;">&lt;</span>Command<span style="color: #333399;"><em></em></span><span style="color: #333399;">&gt;</span><span style="color: #333399;">:</span><span style="color: #333399;">:</span>iterator it;<br><br><span style="color: #0000ff;"><strong>for</strong></span> (it<span style="color: #333399;">=</span>m_commandList.begin(); it<span style="color: #333399;">!=</span>m_commandList.end(); <span style="color: #333399;">++</span>it)<br>{<br>(<span style="color: #333399;"></span>it)<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>ExecuteCmd();<br>}<br>}<br><br><span style="color: #0000ff;"><strong>int</strong></span> main()<br>{<br><span style="color: #008000;">// 店里添加烤肉师傅、菜单、服务员等顾客</span><br>RoastCook<span style="color: #333399;"><em></em></span> cook <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> RoastCook();<br>Command<span style="color: #333399;"></span>   cmd1 <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> MakeMuttonCmd(cook);<br>Command<span style="color: #333399;"><em></em></span>   cmd2 <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> MakeChickenWingCmd(cook);<br>Waiter<span style="color: #333399;"></span>    girl <span style="color: #333399;">=</span> <span style="color: #0000ff;"><strong>new</strong></span> Waiter();<br><br><span style="color: #008000;">// 点菜</span><br>girl<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetCmd(cmd1);<br>girl<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>SetCmd(cmd2);<br><br><span style="color: #008000;">// 服务员通知</span><br>girl<span style="color: #333399;">-</span><span style="color: #333399;">&gt;</span>Notify();<br>system(<span style="color: #ff00bf;">“pause”</span>);<br><span style="color: #0000ff;"><strong>return</strong></span> <span style="color: #6e00aa;">0</span>;<br>}<br><br></div><br></div><br></div><br><div><br><div></div><br><div><strong>3.Command 和 Observer 的一些区别</strong></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;">1.Command封装一个请求对象，Observer定义一种一对多的依赖关系;</span></div><br><div><span style="font-size: 10.5pt; line-height: 1.5;">2.Command通过对象解耦，Observer可以通过消息解耦;</span></div><br><div>3.Command可以有执行和撤消操作，所以从某种意义上来说，Command是有序的，Observer是无序的;</div><br><div>4.Command是在主类中通过接口调用各客户端子类的功能，Observer支持主类将更新通知给客户端，然后由客户端自行处理。</div><br></div><br><div></div><br><div>[参考]:<a href="http://www.cnblogs.com/Random/archive/2012/03/21/2409090.html" target="_blank" rel="noopener">http://www.cnblogs.com/Random/archive/2012/03/21/2409090.html</a></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/11/command-and-observer/" data-id="cjsnzpd5w00bez8h8slguvdri" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cpp/">cpp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/design-pattern/">design pattern</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vtk-e4-ba-a4-e4-ba-92-e5-99-a8-e7-b1-bb" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/10/vtk-e4-ba-a4-e4-ba-92-e5-99-a8-e7-b1-bb/" class="article-date">
  <time datetime="2014-01-10T06:50:32.000Z" itemprop="datePublished">2014-01-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/vtk/">vtk</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/10/vtk-e4-ba-a4-e4-ba-92-e5-99-a8-e7-b1-bb/">VTK交互器类</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div></div><br><div><img src="http://codeplanet-wordpress.stor.sinaapp.com/uploads/2014/01/wpid-a1f1b74175b38a31db58e3eaaa7a9c9f_188999571.png" alt></div><br><div><br><table style="font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 13.333333969116211px; line-height: normal; background-color: #ffffff;"><br><tbody><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyle.html" target="_blank" rel="noopener">vtkInteractorStyle</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Provide event-driven interface to the rendering window (defines trackball mode)</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleAreaSelectHover.html" target="_blank" rel="noopener">vtkInteractorStyleAreaSelectHover</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">An interactor style for an area tree view</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleFlight.html" target="_blank" rel="noopener">vtkInteractorStyleFlight</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Flight motion routines</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleImage.html" target="_blank" rel="noopener">vtkInteractorStyleImage</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Interactive manipulation of the camera specialized for images</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleJoystickActor.html" target="_blank" rel="noopener">vtkInteractorStyleJoystickActor</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Manipulate objects in the scene independently of one another</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleJoystickCamera.html" target="_blank" rel="noopener">vtkInteractorStyleJoystickCamera</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Interactive manipulation of the camera</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleRubberBand2D.html" target="_blank" rel="noopener">vtkInteractorStyleRubberBand2D</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">A rubber band interactor for a 2D view</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleRubberBand3D.html" target="_blank" rel="noopener">vtkInteractorStyleRubberBand3D</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">A rubber band interactor for a 3D view</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleRubberBandPick.html" target="_blank" rel="noopener">vtkInteractorStyleRubberBandPick</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Like TrackBallCamera, but this can pick props underneath a rubber band selection rectangle</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleRubberBandZoom.html" target="_blank" rel="noopener">vtkInteractorStyleRubberBandZoom</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Zoom in by amount indicated by rubber band box</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleSwitch.html" target="_blank" rel="noopener">vtkInteractorStyleSwitch</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Class to swap between interactory styles</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleTerrain.html" target="_blank" rel="noopener">vtkInteractorStyleTerrain</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Manipulate camera in scene with natural view up (e.g., terrain)</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleTrackball.html" target="_blank" rel="noopener">vtkInteractorStyleTrackball</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Trackball motion control</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleTrackballActor.html" target="_blank" rel="noopener">vtkInteractorStyleTrackballActor</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Manipulate objects in the scene independent of each other</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleTrackballCamera.html" target="_blank" rel="noopener">vtkInteractorStyleTrackballCamera</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Interactive manipulation of the camera</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleTreeMapHover.html" target="_blank" rel="noopener">vtkInteractorStyleTreeMapHover</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">An interactor style for a tree map view</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleUnicam.html" target="_blank" rel="noopener">vtkInteractorStyleUnicam</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Unicam navigation style</td><br></tr><br><tr><br><td class="indexkey" style="background-color: #ebeff6; font-weight: bold; border-color: #c4cfe5; margin: 2px 0px; padding: 2px 10px;"><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleUser.html" target="_blank" rel="noopener">vtkInteractorStyleUser</a></td><br><td class="indexvalue" style="background-color: #ebeff6; border-color: #c4cfe5; padding: 2px 10px; margin: 2px 0px;">Customizable interaction routines<span style="font-size: 13.333333969116211px; color: gray;"> </span></td><br></tr><br></tbody><br></table><br></div><br><div></div><br><div><strong><span style="color: #ff0000;">vtkImageViewer2</span></strong>类中包含的交互方式为<span style="font-size: 10.5pt; line-height: 1.5;">vtkInteractorStyleImage</span></div><br><div>具体操作如下：</div><br><div><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleImage.html" title="interactive manipulation of the camera specialized for images" target="_blank" rel="noopener">vtkInteractorStyleImage</a><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;"> </span><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;">allows the user to interactively manipulate (rotate, pan, zoom etc.) the camera.</span><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;"> </span><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleImage.html" title="interactive manipulation of the camera specialized for images" target="_blank" rel="noopener">vtkInteractorStyleImage</a><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;"> </span><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;">is specially designed to work with images that are being rendered with</span><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;"> </span><a href="http://www.vtk.org/doc/release/5.10/html/classvtkImageActor.html" title="draw an image in a rendered 3D scene" target="_blank" rel="noopener">vtkImageActor</a><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;">. Several events are overloaded from its superclass</span><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;"> </span><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyle.html" title="provide event-driven interface to the rendering window (defines trackball mode)" target="_blank" rel="noopener">vtkInteractorStyle</a><span style="background-color: #ffffff; font-family: 'Lucida Grande', Verdana, Geneva, Arial, sans-serif; font-size: 16px; line-height: normal;">, hence the mouse bindings are different. (The bindings keep the camera’s view plane normal perpendicular to the x-y plane.) In summary the mouse events for 2D image interaction are as follows:</span></div><br><div><br><br><em>   Left Mouse button triggers window level events
</em>   CTRL Left Mouse spins the camera around its view plane normal<br><em>   SHIFT Left Mouse pans the camera
</em>   CTRL SHIFT Left Mouse dollys (a positional zoom) the camera<br><em>   Middle mouse button pans the camera
</em>   Right mouse button dollys the camera.<br><em>   SHIFT Right Mouse triggers pick events<br><br><span style="color: #ff0000;">If <a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleImage.html#a3897a9aafe8321ae5334b853f027c594" target="_blank" rel="noopener"><span style="color: #ff0000;">SetInteractionModeToImageSlicing()</span></a> is called, then some of the mouse events are changed as follows:</span>

</em>   <span style="color: #ff0000;">CTRL Left Mouse slices through the image</span><br><em>   <span style="color: #ff0000;">SHIFT Middle Mouse slices through the image</span>
</em>   <span style="color: #ff0000;">CTRL Right Mouse spins the camera</span><br><br>If <a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleImage.html#ac31daacacca6214771212d71413d72e0" target="_blank" rel="noopener">SetInteractionModeToImage3D()</a> is called, then some of the mouse events are changed as follows:<br><br><em>   SHIFT Left Mouse rotates the camera for oblique slicing
</em>   SHIFT Middle Mouse slices through the image<br><em>   CTRL Right Mouse also slices through the image<br><br>In all modes, the following key bindings are in effect:

</em>   R Reset the Window/Level<br><em>   X Reset to a sagittal view
</em>   Y Reset to a coronal view<br>*   Z Reset to an axial view<br><br>Note that the renderer’s actors are not moved; instead the camera is moved.<br><br><strong><span style="color: #ff0000;">QVTKWidget</span></strong>是qt类中图像显示控件，其中也包含vtkInteractorStyleTrackballCamera交互方式<br><br></div><br><div>具体功能如下：</div><br><div><br><br><a href="http://www.vtk.org/doc/release/5.10/html/classvtkInteractorStyleTrackballCamera.html" title="interactive manipulation of the camera" target="_blank" rel="noopener">vtkInteractorStyleTrackballCamera</a> allows the user to interactively manipulate (rotate, pan, etc.) the camera, the viewpoint of the scene. In trackball interaction, the magnitude of the mouse motion is proportional to the camera motion associated with a particular mouse binding. For example, small left-button motions cause small changes in the rotation of the camera around its focal point. For a 3-button mouse, the left button is for rotation, the right button for zooming, the middle button for panning, and ctrl + left button for spinning. (With fewer mouse buttons, ctrl + shift + left button is for zooming, and shift + left button is for panning.)<br><br></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/10/vtk-e4-ba-a4-e4-ba-92-e5-99-a8-e7-b1-bb/" data-id="cjsnzpd3h00ahz8h8ogi5f6xd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/interactor/">interactor</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vtk/">vtk</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANNs/">ANNs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Big-Data/">Big Data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CV/">CV</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Language-Study/">Language Study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NLP/">NLP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Photography/">Photography</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/algorithms/">algorithms</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/big-data/">big data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-cpp/">c/cpp</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/c-cpp/vtk/">vtk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cmake/">cmake</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cpp/">cpp</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/data-science/">data science</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/design-pattern/">design pattern</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">essay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/itk/">itk</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/itk/vtk/">vtk</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/">machine learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/">poem</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/qt/">qt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vtk/">vtk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/未分类/">未分类</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cpp/">Cpp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/">NLP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Neural-Networks/">Neural Networks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Perceptron/">Perceptron</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Photography/">Photography</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STL/">STL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithms/">algorithms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/big-data/">big data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bug/">bug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/callback/">callback</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmake/">cmake</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/command/">command</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cpp/">cpp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cv/">cv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data-science/">data science</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data-struct/">data struct</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-pattern/">design pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dll/">dll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/english/">english</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/error/">error</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/essay/">essay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/event/">event</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/exception/">exception</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/g/">g++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/game/">game</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interactor/">interactor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/itk/">itk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lib/">lib</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matlab/">matlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matplotlib/">matplotlib</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nlp/">nlp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nltk/">nltk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/observer/">observer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openpyxl/">openpyxl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pipeline/">pipeline</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plan/">plan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/poem/">poem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pygame/">pygame</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qt/">qt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sae/">sae</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scrapy/">scrapy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/setuptools/">setuptools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/signals/">signals</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slots/">slots</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/smartpointer/">smartpointer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/">sql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite3/">sqlite3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/template/">template</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/titan/">titan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/to-do-list/">to-do list</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/">tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ui/">ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vs2010/">vs2010</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vtk/">vtk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/win/">win</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordpress/">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wxPython/">wxPython</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件/">文件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/配置/">配置</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Cpp/" style="font-size: 12px;">Cpp</a> <a href="/tags/NLP/" style="font-size: 10px;">NLP</a> <a href="/tags/Neural-Networks/" style="font-size: 12px;">Neural Networks</a> <a href="/tags/Perceptron/" style="font-size: 12px;">Perceptron</a> <a href="/tags/Photography/" style="font-size: 10px;">Photography</a> <a href="/tags/STL/" style="font-size: 10px;">STL</a> <a href="/tags/algorithms/" style="font-size: 10px;">algorithms</a> <a href="/tags/big-data/" style="font-size: 10px;">big data</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/bug/" style="font-size: 10px;">bug</a> <a href="/tags/c/" style="font-size: 10px;">c</a> <a href="/tags/callback/" style="font-size: 10px;">callback</a> <a href="/tags/cmake/" style="font-size: 10px;">cmake</a> <a href="/tags/command/" style="font-size: 10px;">command</a> <a href="/tags/cpp/" style="font-size: 18px;">cpp</a> <a href="/tags/cv/" style="font-size: 12px;">cv</a> <a href="/tags/data-science/" style="font-size: 12px;">data science</a> <a href="/tags/data-struct/" style="font-size: 10px;">data struct</a> <a href="/tags/design-pattern/" style="font-size: 10px;">design pattern</a> <a href="/tags/dll/" style="font-size: 10px;">dll</a> <a href="/tags/eclipse/" style="font-size: 10px;">eclipse</a> <a href="/tags/english/" style="font-size: 10px;">english</a> <a href="/tags/error/" style="font-size: 10px;">error</a> <a href="/tags/essay/" style="font-size: 10px;">essay</a> <a href="/tags/event/" style="font-size: 10px;">event</a> <a href="/tags/exception/" style="font-size: 10px;">exception</a> <a href="/tags/g/" style="font-size: 10px;">g++</a> <a href="/tags/game/" style="font-size: 10px;">game</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/interactor/" style="font-size: 10px;">interactor</a> <a href="/tags/itk/" style="font-size: 16px;">itk</a> <a href="/tags/lib/" style="font-size: 10px;">lib</a> <a href="/tags/linux/" style="font-size: 12px;">linux</a> <a href="/tags/machine-learning/" style="font-size: 14px;">machine learning</a> <a href="/tags/matlab/" style="font-size: 12px;">matlab</a> <a href="/tags/matplotlib/" style="font-size: 10px;">matplotlib</a> <a href="/tags/nlp/" style="font-size: 12px;">nlp</a> <a href="/tags/nltk/" style="font-size: 12px;">nltk</a> <a href="/tags/observer/" style="font-size: 10px;">observer</a> <a href="/tags/openpyxl/" style="font-size: 10px;">openpyxl</a> <a href="/tags/pipeline/" style="font-size: 10px;">pipeline</a> <a href="/tags/plan/" style="font-size: 10px;">plan</a> <a href="/tags/poem/" style="font-size: 14px;">poem</a> <a href="/tags/pygame/" style="font-size: 10px;">pygame</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/qt/" style="font-size: 16px;">qt</a> <a href="/tags/sae/" style="font-size: 10px;">sae</a> <a href="/tags/scrapy/" style="font-size: 10px;">scrapy</a> <a href="/tags/setuptools/" style="font-size: 10px;">setuptools</a> <a href="/tags/signals/" style="font-size: 10px;">signals</a> <a href="/tags/slots/" style="font-size: 10px;">slots</a> <a href="/tags/smartpointer/" style="font-size: 10px;">smartpointer</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/sqlite3/" style="font-size: 10px;">sqlite3</a> <a href="/tags/template/" style="font-size: 10px;">template</a> <a href="/tags/titan/" style="font-size: 10px;">titan</a> <a href="/tags/to-do-list/" style="font-size: 10px;">to-do list</a> <a href="/tags/tool/" style="font-size: 12px;">tool</a> <a href="/tags/ubuntu/" style="font-size: 12px;">ubuntu</a> <a href="/tags/ui/" style="font-size: 12px;">ui</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/vs2010/" style="font-size: 12px;">vs2010</a> <a href="/tags/vtk/" style="font-size: 18px;">vtk</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/win/" style="font-size: 10px;">win</a> <a href="/tags/wordpress/" style="font-size: 10px;">wordpress</a> <a href="/tags/wxPython/" style="font-size: 10px;">wxPython</a> <a href="/tags/文件/" style="font-size: 10px;">文件</a> <a href="/tags/配置/" style="font-size: 10px;">配置</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/02/28/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2015/12/29/matplotlib基础/">matplotlib基础</a>
          </li>
        
          <li>
            <a href="/2015/12/17/NLTK安装教程/">NLTK安装教程</a>
          </li>
        
          <li>
            <a href="/2015/12/17/NLTK命名实体识别/">NLTK命名实体识别</a>
          </li>
        
          <li>
            <a href="/2015/12/17/Titan连接Hbase后端/">Titan连接Hbase后端</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>